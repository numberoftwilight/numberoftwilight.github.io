<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-width=1.0">
    <title>Twilight Perfume Globe</title>
    
    <script src="https://unpkg.com/three"></script>
    <script src="https://unpkg.com/globe.gl"></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            /* í™©í˜¼(Twilight) ëŠë‚Œì˜ ë°°ê²½ ê·¸ë¼ë°ì´ì…˜ */
            background: linear-gradient(135deg, #1a0b2e 0%, #4b1d52 50%, #c84b31 100%);
            font-family: 'Pretendard', -apple-system, sans-serif;
            overflow: hidden; /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¹€ */
            color: white;
        }

        #globeViz {
            width: 100vw;
            height: 100vh;
        }

        /* ì§€ì—­ ì´ë¦„ í˜¸ë²„ ì‹œ ë‚˜íƒ€ë‚˜ëŠ” íˆ´íŒ ë””ìì¸ */
        .scene-tooltip {
            background: rgba(20, 10, 30, 0.8) !important;
            border: 1px solid rgba(255, 255, 255, 0.2) !important;
            border-radius: 12px !important;
            padding: 12px 18px !important;
            font-family: 'Pretendard', sans-serif !important;
            backdrop-filter: blur(10px) !important;
            box-shadow: 0 4px 20px rgba(0,0,0,0.6) !important;
        }

        /* ì˜ìƒì´ ëœ¨ëŠ” íŒì—…(ëª¨ë‹¬) ì°½ - ê¸€ë˜ìŠ¤ëª¨í”¼ì¦˜ ì ìš© */
        #videoModal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            max-width: 700px;
            background: rgba(26, 11, 46, 0.75);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.8);
            z-index: 1000;
            text-align: center;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 25px;
            font-size: 28px;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            transition: 0.3s;
        }

        .close-btn:hover {
            color: #ff9a9e;
        }

        #perfumeVideo {
            width: 100%;
            border-radius: 12px;
            margin-top: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }

        .modal-title {
            font-size: 26px;
            font-weight: 700;
            margin: 0 0 5px 0;
            background: linear-gradient(to right, #ff9a9e 0%, #fecfef 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
    </style>
</head>
<body>

    <div id="globeViz"></div>

    <div id="videoModal">
        <span class="close-btn" onclick="closeModal()">&times;</span>
        <div class="modal-title">Kanazawa, Japan</div>
        <p style="color: #ccc; font-size: 15px; margin-bottom: 20px;">ë°”ëŒì„ ì…ë‹¤, ê°€ë‚˜ìì™€ë¥¼ ê¸°ì–µí•˜ë‹¤ (MEMORY 1 : KANAZAWA OF WIND)</p>
        
        <video id="perfumeVideo" controls>
            <source src="KakaoTalk_20260225_175616729.mp4" type="video/mp4">
            ë¸Œë¼ìš°ì €ê°€ ì˜ìƒì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
        </video>
    </div>

    <script>
        // ğŸ“ í–¥ìˆ˜ ë°ì´í„° (ìœ„ë„, ê²½ë„, ì´ë¦„, í–¥ê¸° ì„¤ëª…)
        const perfumeLocations = [
            { lat: 36.5613, lng: 136.6562, name: 'ê°€ë‚˜ìì™€ (Kanazawa)', desc: 'ë°”ëŒì„ íƒ€ê³  ì˜¤ëŠ” ì€ì€í•œ í–¥', id: 'kanazawa' },
            { lat: 48.8566, lng: 2.3522, name: 'íŒŒë¦¬ (Paris)', desc: 'í•´ì§ˆë…˜ ì„¼ ê°•ë³€ì˜ ë¡œë§¨í‹±í•œ ë¨¸ìŠ¤í¬ í–¥', id: 'paris' },
            { lat: 40.7128, lng: -74.0060, name: 'ë‰´ìš• (New York)', desc: 'ìƒˆë²½ ë„ì‹œì˜ ì°¨ê°‘ê³  ì„¸ë ¨ëœ ìš°ë”” í–¥', id: 'ny' }
        ];

        // ğŸŒ 3D ì§€êµ¬ë³¸ ìƒì„± ì„¤ì •
        const world = Globe()
            (document.getElementById('globeViz'))
            .globeImageUrl('//unpkg.com/three-globe/example/img/earth-night.jpg') // ë°¤ ëŠë‚Œì˜ ì§€êµ¬ í‘œë©´ ì´ë¯¸ì§€
            .backgroundColor('rgba(0,0,0,0)') // CSS í™©í˜¼ ê·¸ë¼ë°ì´ì…˜ì´ ë³´ì´ê²Œ íˆ¬ëª… ì²˜ë¦¬
            .pointsData(perfumeLocations)
            .pointAltitude(0.05)
            .pointColor(() => '#ffb703') // ë§ˆì»¤ ìƒ‰ìƒ (í™©í˜¼ì— ì–´ìš¸ë¦¬ëŠ” ì€ì€í•œ ì˜¤ë Œì§€ ê³¨ë“œ)
            .pointResolution(2)
            .pointRadius(0.6) // ë§ˆì»¤ í¬ê¸°
            .pointLabel(d => `
                <div style="text-align: center;">
                    <strong style="color:#ffb703; font-size:16px;">${d.name}</strong><br>
                    <span style="font-size:13px; color:#ddd;">${d.desc}</span><br>
                    <i style="font-size:11px; color:#ff9a9e; margin-top:8px; display:inline-block;">í´ë¦­í•˜ì—¬ í–¥ìˆ˜ ì˜ìƒ ë³´ê¸° âœ¨</i>
                </div>
            `)
            .onPointClick(d => {
                // í´ë¦­í•œ ì§€ì—­ì´ ê°€ë‚˜ìì™€ì¼ ë•Œë§Œ ëª¨ë‹¬ ì˜¤í”ˆ
                if(d.id === 'kanazawa') {
                    openModal();
                } else {
                    alert(d.name + ' ì§€ì—­ì˜ í–¥ìˆ˜ëŠ” ì¡°í–¥ ì¤‘ì…ë‹ˆë‹¤. ğŸŒ™');
                }
            });

        // ì´ˆê¸° ì¹´ë©”ë¼ ìœ„ì¹˜ (ì•„ì‹œì•„ ìª½ìœ¼ë¡œ ë¶€ë“œëŸ½ê²Œ ì‹œì‘)
        world.pointOfView({ lat: 35, lng: 135, altitude: 2 });

        // ì€ì€í•˜ê²Œ ì§€êµ¬ê°€ ìë™ íšŒì „í•˜ëŠ” íš¨ê³¼
        world.controls().autoRotate = true;
        world.controls().autoRotateSpeed = 0.5;

        // ğŸ¥ ëª¨ë‹¬ ë° ì˜ìƒ ì œì–´ ìŠ¤í¬ë¦½íŠ¸
        const modal = document.getElementById('videoModal');
        const video = document.getElementById('perfumeVideo');

        function openModal() {
            modal.style.display = 'block';
            video.play(); // ì°½ì´ ì—´ë¦¬ë©´ ë¶€ë“œëŸ½ê²Œ ìë™ ì¬ìƒ
        }

        function closeModal() {
            modal.style.display = 'none';
            video.pause(); // ì°½ ë‹«ìœ¼ë©´ ì˜ìƒ ì¼ì‹œì •ì§€
            video.currentTime = 0; // ì˜ìƒ ì²˜ìŒìœ¼ë¡œ ë˜ê°ê¸°
        }
    </script>
</body>
</html>
