<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Twilight Perfume | Memory of Wind</title>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;1,400&family=Pretendard:wght@200;300;400&display=swap');
    </style>

    <script src="https://unpkg.com/three"></script>
    <script src="https://unpkg.com/globe.gl"></script>
    
    <style>
        body {
            margin: 0; padding: 0;
            background: linear-gradient(135deg, #050408, #160a17, #24121e, #080a12);
            background-size: 300% 300%;
            animation: breath 15s ease-in-out infinite;
            font-family: 'Pretendard', sans-serif;
            overflow: hidden; color: white;
        }

        @keyframes breath {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .brand-header { position: absolute; top: 50px; left: 60px; z-index: 10; pointer-events: none; }
        .brand-header h1 { font-family: 'Playfair Display', serif; font-size: 28px; letter-spacing: 10px; font-weight: 400; margin: 0; color: #ebd5c1; }
        .brand-header p { font-size: 11px; letter-spacing: 5px; opacity: 0.4; margin-top: 12px; font-weight: 200; }

        #globeViz { width: 100vw; height: 100vh; }

        .scene-tooltip {
            background: rgba(10, 5, 12, 0.7) !important;
            backdrop-filter: blur(15px) !important;
            border: 1px solid rgba(235, 213, 193, 0.2) !important;
            border-radius: 2px !important;
            padding: 16px 20px !important;
        }

        #videoModal {
            display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 90%; max-width: 850px; background: rgba(5, 3, 8, 0.85); backdrop-filter: blur(40px);
            border: 1px solid rgba(235, 213, 193, 0.15); padding: 40px 50px; z-index: 1000;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.9); text-align: center;
        }

        .close-btn {
            position: absolute; top: 25px; right: 35px; font-size: 12px; letter-spacing: 2px;
            cursor: pointer; opacity: 0.4; transition: 0.4s ease;
        }
        .close-btn:hover { opacity: 1; color: #ebd5c1; }

        #perfumeVideo { width: 100%; outline: none; border-radius: 4px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .modal-title { font-family: 'Playfair Display', serif; font-style: italic; font-size: 34px; margin-bottom: 8px; color: #ebd5c1; letter-spacing: 2px; }
    </style>
</head>
<body>

    <div class="brand-header">
        <h1>NUMBER OF TWILIGHT</h1>
        <p>SCENT OF THE WORLD GAZE</p>
    </div>

    <div id="globeViz"></div>

    <div id="videoModal">
        <span class="close-btn" onclick="closeModal()">CLOSE ‚úï</span>
        <div class="modal-title" id="modalTitle">City</div>
        <p id="modalDesc" style="letter-spacing: 2px; font-weight: 200; font-size: 13px; color: #aaa; margin-bottom: 30px;">
            MEMORY DESC
        </p>
        
        <video id="perfumeVideo" controls>
            <source id="videoSource" src="" type="video/mp4">
        </video>
    </div>

    <script>
        // üö® ÏßÄÏó≠ Ï∂îÍ∞ÄÎäî Î¨¥Ï°∞Í±¥ Ïó¨Í∏∞ÏÑúÎßå ÌïòÏãúÎ©¥ Îê©ÎãàÎã§! üö®
        const perfumeLocations = [
            { 
                lat: 36.5613, lng: 136.6562, 
                name: 'KANAZAWA', 
                desc: 'Î∞îÎûåÏùÑ ÌÉÄÍ≥† Ïò§Îäî ÏùÄÏùÄÌïú Ìñ•', 
                memoryText: 'MEMORY 1 : KANAZAWA OF WIND', 
                videoSrc: 'KakaoTalk_20260225_175616729.mp4' 
            },
            // ÏòàÏãú: ÏÉàÎ°úÏö¥ ÏßÄÏó≠ Ï∂îÍ∞ÄÌïòÎ†§Î©¥ ÏïÑÎûò Ï£ºÏÑù(//)ÏùÑ ÏßÄÏö∞Í≥† ÎÇ¥Ïö©Îßå Î∞îÍøîÏÑú Ïì∞ÏÑ∏Ïöî!
            // { 
            //     lat: 48.8566, lng: 2.3522, 
            //     name: 'PARIS', 
            //     desc: 'Ìï¥ÏßàÎÖò ÏÑº Í∞ïÎ≥ÄÏùò Î°úÎß®Ìã±Ìïú Î®∏Ïä§ÌÅ¨ Ìñ•', 
            //     memoryText: 'MEMORY 2 : PARIS OF DUSK', 
            //     videoSrc: 'paris_video.mp4' 
            // }
        ];

        const world = Globe()
            (document.getElementById('globeViz'))
            .globeImageUrl('//unpkg.com/three-globe/example/img/earth-night.jpg')
            .bumpImageUrl('//unpkg.com/three-globe/example/img/earth-topology.png')
            .backgroundColor('rgba(0,0,0,0)')
            .showAtmosphere(true) 
            .atmosphereColor('#ebd5c1')
            .atmosphereAltitude(0.12)
            .pointsData(perfumeLocations)
            .pointAltitude(0.06)
            .pointColor(() => '#ebd5c1')
            .pointRadius(0.8)
            .pointLabel(d => `
                <div style="text-align: center; color: white;">
                    <span style="font-family: 'Playfair Display', serif; font-size:18px; letter-spacing:4px; color:#ebd5c1;">${d.name}</span><br>
                    <div style="width:1px; height:15px; background:rgba(235, 213, 193, 0.3); margin:10px auto;"></div>
                    <span style="font-family: 'Pretendard', sans-serif; font-size:11px; font-weight:200; opacity:0.7; letter-spacing:1px;">${d.desc}</span>
                </div>
            `)
            .onPointClick(d => {
                openModal(d); // ÌÅ¥Î¶≠ÌïòÎ©¥ Í∑∏ ÏßÄÏó≠ Îç∞Ïù¥ÌÑ∞Î•º Î™®Îã¨Î°ú Î≥¥ÎÉÑ
            });

        world.starPositions([...Array(2000)].map(() => [(Math.random()-0.5)*1000, (Math.random()-0.5)*1000, (Math.random()-0.5)*1000]));
        world.pointOfView({ lat: 35, lng: 135, altitude: 2.2 });
        world.controls().autoRotate = true;
        world.controls().autoRotateSpeed = 0.4; 

        const modal = document.getElementById('videoModal');
        const video = document.getElementById('perfumeVideo');
        const source = document.getElementById('videoSource');

        function openModal(data) {
            // ÌÅ¥Î¶≠Ìïú ÏßÄÏó≠Ïóê ÎßûÍ≤å Ï∞Ω Ï†úÎ™©, ÏÑ§Î™Ö, ÏòÅÏÉÅÏùÑ ÏïåÏïÑÏÑú Î∞îÍøîÏπòÍ∏∞ Ìï©ÎãàÎã§
            document.getElementById('modalTitle').innerText = data.name;
            document.getElementById('modalDesc').innerText = data.memoryText;
            source.src = data.videoSrc;
            
            video.load(); // Î∞îÎÄê ÏòÅÏÉÅ ÏÉàÎ°úÍ≥†Ïπ®
            modal.style.display = 'block';
            video.play();
        }

        function closeModal() {
            modal.style.display = 'none';
            video.pause();
            video.currentTime = 0;
        }
    </script>
</body>
</html>
